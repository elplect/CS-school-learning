## 第四章 存储器管理

存储器管理的主要对象 : 内存

### 1.存储器的层级结构

计算机执行时,几乎每一条指令都会涉及对存储器的访问,因此要求存储器的访问速度要能跟上处理机的运行速度.

存储器的三个要求 : 速度快、容量大、便宜

#### 1.多层结构的存储器系统

##### 1.存储器的多级结构

通用计算机而言 ; 存储层次至少三层

1. CPU寄存器
2. 主存
3. 辅存

较高档的计算机

1. 寄存器   CPU寄存器
2. 高速缓存、主存储器、磁盘缓存      主存
3. 固定磁盘、可移动存储介质  辅存

层次越高,存储器的访问速度越快,价格越高,存储容量越小

寄存器、高速缓存、主存储器和磁盘存储属于**操作系统存储管理**的管辖范畴,断电后失去信息.

固定磁盘、可移动存储介质 属于 **设备管理**,信息将被长久存储

##### 2.可执行存储器

​		寄存器和主存储器又被称为 可执行存储器..存放其中的信息与存放在辅存里的信息,计算机的访问机制是不同的.所需耗费的时间也是不同的..

​		进程使用load或store指令对可执行存储器进行访问..但是对辅存的访问需要I/O设备的实现(涉及中断、设备驱动程序、物理设备的运行),耗时多至少3个数量级.

不同层次的存储介质,由操作系统统一管理.操作系统的存储管理负责对**可执行存储器的分配、回收**,以及提供在**存储层次间**数据移动的管理机制.

设备和文件管理根据用户需求,提供对辅存的管理机制.

#### 2.主存储器与寄存器

VLSI发展后,主存储器和寄存器的容量都大大增加了.

##### 1.主存储器(内存/主存)

​		用来保存进程运行时的程序和数据,可称为可执行存储器.通常处理机是从主存储器取得指令和数据的.并将指令放入指令寄存器,将数据放到数据寄存器.      物理材质组成:磁芯--->VLSI

CPU与外围设备交换的信息一般依托于主存储器的地址空间.

##### 2.寄存器

​		寄存器具有与处理机相同的速度.

​		数目 : 数十到数百个    字长 : 一般32或64位

​		小型嵌入机数目 : 几个到十几个    字长:8位

#### 3.高速缓存和磁盘缓存

高速缓存是实际存在的存储器

磁盘缓存是利用主存中的部分存储空间暂时存放从磁盘中读出(写入)的信息.

一个文件的数据可能先后出现在不同层次的存储器.

##### 1.高速缓存

​		高速缓存的实现 涉及 程序执行的局部性原理.

​		主要用于备份主存中较常用的数据,以减少处理机对主存储器的访问次数..

​		容量 : 几十kb到几MB

​		每次访问的时候,从主存储器中临时复制到高速缓存中.当CPU访问特定信息时,先检查高速缓存,再检查主存.

​		大多数计算机都有指令高速缓存,用来暂存下一条将执行的指令,如果没有高速缓存,CPU会空等几个周期,直到下一条指令从主存中取出.

##### 2.磁盘缓存

​		磁盘I/O速度远低于对主存的访问速度,为了缓和两者之间的速度差异,而设置了磁盘缓存,用来暂存频繁使用的一部分磁盘数据和信息,以减少访问磁盘的次数.