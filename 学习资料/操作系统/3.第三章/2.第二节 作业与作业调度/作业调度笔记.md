### 2.作业与作业调度

多道批处理系统 : 作业是用户提交给系统的一项相对独立的工作;

#### 1.批处理系统中作业

##### 1.作业与作业步

1. 作业
   1. 比程序更广泛的概念
   2. 包含了程序、数据,还应配有一份作业说明书,系统根据该说明书对程序的运行加以控制.
   3. 批处理系统,是把 作业 作为基本单位调入内存的
2. 作业步
   1. 作业运行期间,每个作业都必须经历若干个独立、关联的顺序加工步骤才能得到结果
   2. 每一个加工步骤,就是作业步

##### 2.作业控制块

​		为了管理和调度作业,在多道批处理系统,为每个作业设置了一个作业控制块JCB,它是作业在系统中存在的标志.

​		JCB保存了系统对作业进行管理和调度所需的所有信息.

​		通常包含 : 作业表示、用户名称、用户账号、作业类型(CPU忙绿型、I/O忙碌型、批量型、终端型)、作业状态、调度信息(优先级、作业运行时间)、资源需求和资源使用情况等

作业进入系统时 :

1. 作业注册程序为该作业建立一个JCB.
2. 根据作业类型,放入相应的作业后备队列中等待调度
3. 调度程序依据一定的算法来调度它们,被调度到的作业装入到内存中
4. 作业运行期间,系统按照JCB中的信息和作业说明书对作业加以控制.
5. 作业之行结束,系统负责回收一分配给它的资源,撤销该作JCB

##### 3.作业运行的三个阶段和三种状态

1. 收容阶段  后备状态
   1. 操作员把用户提交的作业通过某种输入方式或SPOOLimg系统输入到硬盘上
   2. 为其建立JCB
   3. 放入作业后备队列中
2. 运行阶段  运行状态
   1. 被作业调度选中后,为其分配必要资源和建立进程
   2. 放入就绪队列中
3. 完成阶段  完成状态
   1. 终止程序将会回收已分配给该作业的作业控制块和所有资源,并将作业运行结果信息形成输出文件后输出.

#### 2.作业调度的主要任务

主要任务 : 根据JCB中的信息,**检查系统中的资源能否满足作业对资源的需求**,以及按照一定的调度算法,从外存的后备队列中选取**某些作业调入内存**中,并为之创建进程,分配必要资源.然后将新创建的**进程排在就绪队列上等待调度**.

因此也把作业调度称为接纳调度.

每次执行作业调度,都会执作出以下两个决定 : 

1. 接纳多少个作业
   1. 选取多少个作业到内存中,取决于多道程序度(允许多少个作业同时在内存中运行).
   2. 多到程序度的确定是根据计算机的系统规模、运行速度、作业大小,以及能否获得较好的性能来作出适当抉择的.
2. 接纳那些作业
   1. 取决于所采用的调度算法.
      1. 先来先服务调度算法
      2. 短作业优先调度算法
      3. 基于作业优先级的调度算法
      4. 响应比高者优先的调度算法

#### 3.先来先服务(FCFS)和短作业优先(SJF)调度算法

##### 1.先来先服务调度算法

​		FCFS是最简单的调度算法,可用于作业、进程调度.**经常与其他调度算法组合使用.**

##### 2.短作业优先的调度算法

​		实际情况,短作业占有很大比例.为了使他们能比长作业优先执行,而产生了短作业优先调度算法.

缺点 :

1. 必须预知作业的运行时间
2. 对长作业非常不利
3. 在采用SJF算法时,人-机无法交互.
4. 未考虑作业的紧急程度,故不能保证急迫性作业得到执行.

#### 4.优先级调度算法和高响应比优先调度算法

1. 优先级调度算法(PSA)
2. 高响应比优先调度算法(HRRN)
   1. 考虑了 : 作业等待时间、作业运行时间
   2. 既兼顾了短作业,又不会使得长作业等待过长时间,从而改善了处理机的调度性能.
   3. 实现 : 引入了动态优先级  $优先权= \frac{等待时间+要求服务时间}{要求服务时间}= \frac{响应时间}{要求服务时间}$
   4. 利用该算法,每次调度前,都要先做响应比的计算,会增加系统开销.

